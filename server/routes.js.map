{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/harmony-module.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/app/calculations.ts","webpack:///./src/app/card.tsx","webpack:///./src/app/crypto.tsx","webpack:///./src/app/index.tsx","webpack:///./src/app/login.tsx","webpack:///./src/app/member.tsx","webpack:///./src/app/mutations.tsx","webpack:///./src/app/store.ts","webpack:///./src/client/api.ts","webpack:///./src/server/api.ts","webpack:///./src/server/auth/api.ts","webpack:///./src/server/auth/socket.ts","webpack:///./src/server/db.ts","webpack:///./src/server/events.ts","webpack:///./src/server/routes.tsx","webpack:///./src/server/template.ts","webpack:///external \"@babel/runtime/helpers/applyDecoratedDescriptor\"","webpack:///external \"@babel/runtime/helpers/asyncToGenerator\"","webpack:///external \"@babel/runtime/helpers/classCallCheck\"","webpack:///external \"@babel/runtime/helpers/createClass\"","webpack:///external \"@babel/runtime/helpers/defineProperty\"","webpack:///external \"@babel/runtime/helpers/extends\"","webpack:///external \"@babel/runtime/helpers/getPrototypeOf\"","webpack:///external \"@babel/runtime/helpers/inherits\"","webpack:///external \"@babel/runtime/helpers/objectWithoutProperties\"","webpack:///external \"@babel/runtime/helpers/possibleConstructorReturn\"","webpack:///external \"@babel/runtime/helpers/slicedToArray\"","webpack:///external \"@babel/runtime/helpers/toConsumableArray\"","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"better-sqlite3\"","webpack:///external \"crypto\"","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///external \"isomorphic-style-loader/StyleContext\"","webpack:///external \"kefir\"","webpack:///external \"lodash\"","webpack:///external \"mobx\"","webpack:///external \"mobx-react\"","webpack:///external \"path\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-helmet\"","webpack:///external \"react-hot-loader/root\"","webpack:///external \"react-router\"","webpack:///external \"react-router-dom\"","webpack:///external \"socket.io\"","webpack:///external \"socket.io-client\"","webpack:///external \"socketio-auth\"","webpack:///external \"superagent\"","webpack:///external \"uuid\""],"names":["satsPerBtc","crawlerHash","tasks","taskId","createHash","Buffer","from","crawler","history","forEach","task","newCards","t","indexOf","push","subTask","filter","pst","concat","subTasks","priorities","completed","length","shortName","name","limit","shortened","substring","cardColorCSS","color","redwx","bluewx","greenwx","yellowwx","purplewx","blackwx","blankCard","created","deck","parents","height","undefined","width","newCard","trim","address","bolt11","book","boost","claimed","passed","guild","lastClaimed","completeValue","payment_hash","highlights","seen","time","grid","blankGrid","newGrid","rows","isString","x","Object","prototype","toString","call","safeMerge","cardA","cardZ","console","log","_","isEmpty","filterNull","Set","cadToSats","cadAmt","spot","sats","parseFloat","parseInt","satsToCad","cad","toFixed","calculateMsThisMonth","today","Date","daysThisMonth","getYear","getMonth","getDate","getMeridienTime","ts","d","hour24","getHours","rollover","hour","meridien","date","month","minute","getMinutes","year","getFullYear","weekday","slice","RenderCard","props","aoStore","store","card","hashMap","get","cardText","memberById","state","cash","alias","React","Component","AoCard","match","params","setCurrentCard","currentCard","payload","sha256","crypto","update","digest","hmacHex","data","signingKey","hmac","createHmac","KEY_AUTH_DATA","ProtectedRoute","Comp","component","loggedIn","path","rest","App","observer","useEffect","document","body","classList","add","Login","AoMember","hot","useState","user","setUser","pass","setPass","onClick","e","api","createSession","then","fetchState","res","onKeyDown","key","preventDefault","target","value","member","memberId","aoMuts","aos","ev","type","ao","i","links","inAddressConnect","some","a","inboundSecret","secret","lastContact","now","newEv","outboundSecret","outAddressConnect","splice","cashMuts","currency","rent","amount","cap","outputs","channels","usedTxIds","txid","pay_index","info","membersMuts","members","lastUsed","timestamp","muted","active","field","newfield","tickers","symbol","index","toLowerCase","resourcesMuts","resources","resourceIds","map","r","resourceId","resource","stock","pubkey","memesMuts","memes","fileHash","file","hash","memeId","filename","filetype","sessionsMuts","sessions","idHasSession","session","ownerId","merge","s","pullAt","token","tasksMuts","didUpdateInline","h","valence","calculations","inId","prioritized","tId","fromMemberId","toMemberId","p","found","find","timelog","seconds","count","j","st","has","entries","y","row","cell","taskIds","includes","Array","isArray","pId","stId","taskExists","Number","bounty","paid","mId","charged","originalIndex","swapId1","swapIndex","swapId2","originalIndexCompleted","swapIndexCompleted","newST","newCompleted","taskB","bumpId","direction","startLength","changedIndexes","newT","cur","safeClone","beforeLength","filtered","sst","unshift","gridTaskId","applyEvent","setCurrentCash","current","setCurrentTasks","setCurrentSessions","setCurrentAO","setCurrentMembers","setCurrentResources","setCurrentMemes","meme","setCurrent","serverState","pubState","defaultState","AoStore","action","bound","observable","keys","assign","loggedInMember","m","Map","set","computed","applyBackup","backup","server","removeSensitive","secretStuff","str","omit","createAoStore","AoApi","socket","connect","on","emit","reason","uuidV1","sessionKey","request","post","window","localStorage","setItem","getItem","initializeState","catch","io","autoConnect","router","Router","req","json","getIdSecret","identifier","authorized","headers","authorization","endpoint","status","end","events","sessionCreated","err","dbResponse","send","middleware","next","url","startsWith","test","use","authenticate","_socket","callback","eventEmitter","shadowEmitter","changeFeed","stream","shadowFeed","DB","conn","preparedStmts","db","checkTable","prepare","all","initializeSqlite","createStatements","initDb","initBackups","run","insertEvent","fob","balance","badges","startFeed","function","doc","JSON","parse","getAll","insertBackup","recover","iterate","event","result","stringify","aodb","startDB","startDb","Events","newEvent","express","require","Server","renderToString","StaticRouter","Route","Switch","Kefir","StyleContext","authenticateSocket","authSocket","default","buildHtml","authApi","reactions","process","nextTick","optionList","defaultPrice","resourceList","charge","cashTagLocation","search","customPrice","hopper","resourceUsed","memberActivated","onValue","filteredStream","fullEvStream","loaded","module","exports","routes","_options","_res","timeout","css","insertCss","styles","style","_getCss","context","components","redirect","isDev","SITE_TITLE","SITE_URL","SITE_COVER_IMG_URL","SITE_DESCRIPTION","SITE_CSS","APP_HTML","SITE_PRELOADED_STATE","SITE_SCRIPTS","DEV_SCRIPTS","loadTemplateBlocking","htmlPath","join","__dirname","fs","existsSync","exit","html","readFileSync","replace","error","mapObj","re","RegExp","escapeRegExp","matched","render","preloadedState","siteUrl","title","coverImg","description","htmlTemplate","global","getProtocol","proto","connection","encrypted","forwarded","split","baseUrl","originalUrl"],"mappings":";;QAAA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA,IAAI;QACJ;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA,6BAA6B;QAC7B,6BAA6B;QAC7B;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,qBAAqB,gBAAgB;QACrC;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,qBAAqB,gBAAgB;QACrC;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,KAAK;;QAEL;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA,kBAAkB,8BAA8B;QAChD;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,IAAI;QACJ;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,IAAI;QACJ;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA,OAAO;QACP;QACA;QACA;QACA;QACA,IAAI;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,oBAAoB,2BAA2B;QAC/C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,OAAO;QACP;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA,mBAAmB,cAAc;QACjC;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA,gBAAgB,KAAK;QACrB;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA,gBAAgB,YAAY;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA,cAAc,4BAA4B;QAC1C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA,IAAI;;QAEJ;QACA;QACA;QACA;QACA;QACA;;QAEA;;QAEA;QACA;QACA,eAAe,4BAA4B;QAC3C;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA,eAAe,4BAA4B;QAC3C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,uCAAuC;QACxD;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,uCAAuC;QACxD;QACA;QACA;QACA;QACA;QACA;QACA;QACA,iBAAiB,sBAAsB;QACvC;QACA;QACA;QACA,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QACA,UAAU;QACV;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA,cAAc,wCAAwC;QACtD;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,OAAO;QACP;QACA;QACA;QACA;QACA;QACA;QACA,SAAS;QACT;QACA;QACA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA;QACA;QACA;QACA;QACA,QAAQ;QACR;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA,MAAM;QACN;QACA,KAAK;QACL;;QAEA;QACA;QACA;QACA,IAAI;QACJ;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,eAAe;QACf;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,sCAAsC,uBAAuB;;;QAG7D;QACA;;;;;;;;;;;;AC9yBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBA;AACA;AAEA,IAAMA,UAAU,GAAG,SAAnB,C,CAA6B;;AAEtB,SAASC,WAAT,CAAqBC,KAArB,EAA4BC,MAA5B,EAAoC;AACzC,SAAOC,0DAAU,CAACC,MAAM,CAACC,IAAP,CAA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","file":"routes.js","sourcesContent":[" \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar chunk = require(\"./\" + \"\" + chunkId + \".\" + hotCurrentHash + \".hot-update.js\");\n \t\thotAddUpdateChunk(chunk.id, chunk.modules);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest() {\n \t\ttry {\n \t\t\tvar update = require(\"./\" + \"\" + hotCurrentHash + \".hot-update.json\");\n \t\t} catch (e) {\n \t\t\treturn Promise.resolve();\n \t\t}\n \t\treturn Promise.resolve(update);\n \t}\n\n \t//eslint-disable-next-line no-unused-vars\n \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"7e1623e33a72e5df4c35\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_selfInvalidated: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n \t\t\tinvalidate: function() {\n \t\t\t\tthis._selfInvalidated = true;\n \t\t\t\tswitch (hotStatus) {\n \t\t\t\t\tcase \"idle\":\n \t\t\t\t\t\thotUpdate = {};\n \t\t\t\t\t\thotUpdate[moduleId] = modules[moduleId];\n \t\t\t\t\t\thotSetStatus(\"ready\");\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"ready\":\n \t\t\t\t\t\thotApplyInvalidatedModule(moduleId);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"prepare\":\n \t\t\t\t\tcase \"check\":\n \t\t\t\t\tcase \"dispose\":\n \t\t\t\t\tcase \"apply\":\n \t\t\t\t\t\t(hotQueuedInvalidatedModules =\n \t\t\t\t\t\t\thotQueuedInvalidatedModules || []).push(moduleId);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\t// ignore requests in error states\n \t\t\t\t\t\tbreak;\n \t\t\t\t}\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash, hotQueuedInvalidatedModules;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(hotApplyInvalidatedModules() ? \"ready\" : \"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tvar chunkId = \"routes\";\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n \t\treturn hotApplyInternal(options);\n \t}\n\n \tfunction hotApplyInternal(options) {\n \t\thotApplyInvalidatedModules();\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (\n \t\t\t\t\t!module ||\n \t\t\t\t\t(module.hot._selfAccepted && !module.hot._selfInvalidated)\n \t\t\t\t)\n \t\t\t\t\tcontinue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted &&\n \t\t\t\t// removed self-accepted modules should not be required\n \t\t\t\tappliedUpdate[moduleId] !== warnUnexpectedRequire &&\n \t\t\t\t// when called invalidate self-accepting is not possible\n \t\t\t\t!installedModules[moduleId].hot._selfInvalidated\n \t\t\t) {\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\tparents: installedModules[moduleId].parents.slice(),\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Now in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\tif (hotUpdateNewHash !== undefined) {\n \t\t\thotCurrentHash = hotUpdateNewHash;\n \t\t\thotUpdateNewHash = undefined;\n \t\t}\n \t\thotUpdate = undefined;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = item.parents;\n \t\t\thotCurrentChildModule = moduleId;\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\tif (hotQueuedInvalidatedModules) {\n \t\t\treturn hotApplyInternal(options).then(function(list) {\n \t\t\t\toutdatedModules.forEach(function(moduleId) {\n \t\t\t\t\tif (list.indexOf(moduleId) < 0) list.push(moduleId);\n \t\t\t\t});\n \t\t\t\treturn list;\n \t\t\t});\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \tfunction hotApplyInvalidatedModules() {\n \t\tif (hotQueuedInvalidatedModules) {\n \t\t\tif (!hotUpdate) hotUpdate = {};\n \t\t\thotQueuedInvalidatedModules.forEach(hotApplyInvalidatedModule);\n \t\t\thotQueuedInvalidatedModules = undefined;\n \t\t\treturn true;\n \t\t}\n \t}\n\n \tfunction hotApplyInvalidatedModule(moduleId) {\n \t\tif (!Object.prototype.hasOwnProperty.call(hotUpdate, moduleId))\n \t\t\thotUpdate[moduleId] = modules[moduleId];\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(\"./src/server/routes.tsx\")(__webpack_require__.s = \"./src/server/routes.tsx\");\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","\nimport _ from 'lodash';\nimport { createHash } from './crypto';\n\nconst satsPerBtc = 100000000 // one hundred million per btc\n\nexport function crawlerHash(tasks, taskId) {\n  return createHash(Buffer.from(crawler(tasks, taskId)))\n}\n\nexport function crawler(tasks, taskId) {\n  let history = []\n  tasks.forEach(task => {\n    if (task.taskId === taskId) {\n      let crawler = [taskId]\n      do {\n        let newCards = []\n        crawler.forEach(t => {\n          if (history.indexOf(t) >= 0) return\n          history.push(t)\n          let subTask = tasks.filter(pst => pst.taskId === t)[0]\n          if (subTask) {\n            newCards = newCards\n              .concat(subTask.subTasks)\n              .concat(subTask.priorities)\n              .concat(subTask.completed)\n          }\n        })\n        crawler = newCards\n      } while (crawler.length > 0)\n    }\n  })\n  return history\n}\n\nexport function shortName(name) {\n  let limit = 280\n  let shortened = name.substring(0, limit)\n  if (name.length > limit) {\n    shortened += ''\n  }\n  return shortened\n}\n\nexport function cardColorCSS(color) {\n  return {\n    redwx: color == 'red',\n    bluewx: color == 'blue',\n    greenwx: color == 'green',\n    yellowwx: color == 'yellow',\n    purplewx: color == 'purple',\n    blackwx: color == 'black'\n  }\n}\n\nexport function blankCard(\n  taskId,\n  name,\n  color,\n  created,\n  deck = [],\n  parents = [],\n  height = undefined,\n  width = undefined\n) {\n  let newCard = {\n    taskId,\n    color,\n    deck,\n    name: name.trim(),\n    address: '',\n    bolt11: '',\n    book: {},\n    boost: 0,\n    priorities: [],\n    subTasks: [],\n    completed: [],\n    parents: parents,\n    claimed: [],\n    passed: [],\n    guild: false,\n    created: created,\n    lastClaimed: 0,\n    completeValue: 0,\n    payment_hash: '',\n    highlights: [],\n    seen: [],\n    time: [],\n    grid: height >= 1 && width >= 1 ? blankGrid(height, width) : false\n  }\n  return newCard\n}\n\nexport function blankGrid(height = 3, width = 3) {\n  let newGrid = {\n    height: height,\n    width: width,\n    rows: {}\n  }\n  return newGrid\n}\n\nfunction isString(x) {\n  return Object.prototype.toString.call(x) === '[object String]'\n}\n\nexport function safeMerge(cardA, cardZ) {\n  // grids are not merged yet\n  if (!cardA || !cardZ) {\n    console.log('attempt to merge nonexistent card')\n    return\n  }\n\n  if (!cardZ.taskId || !isString(cardZ.taskId)) {\n    console.log('attempt to merge card with a missing or invalid taskId')\n    return\n  }\n\n  if (!cardZ.color) {\n    console.log('attempt to merge card without a color')\n    return\n  }\n\n  if (isString(cardZ.color) && !_.isEmpty(cardZ.color.trim())) {\n    cardA.color = cardZ.color\n  }\n\n  if (isString(cardZ.guild) && !_.isEmpty(cardZ.guild.trim())) {\n    cardA.guild = cardZ.guild\n  }\n\n  const filterNull = tasks => {\n    return tasks.filter(task => task !== null && task !== undefined)\n  }\n\n  cardA.book = cardZ.guild\n  cardA.address = cardZ.guild\n  cardA.bolt11 = cardZ.guild\n  cardA.priorities = [\n    ...new Set(cardA.priorities.concat(filterNull(cardZ.priorities)))\n  ]\n  cardA.subTasks = [\n    ...new Set(cardA.subTasks.concat(filterNull(cardZ.subTasks)))\n  ]\n  cardA.completed = [\n    ...new Set(cardA.completed.concat(filterNull(cardZ.completed)))\n  ]\n  cardA.passed = [...new Set(cardA.passed.concat(filterNull(cardZ.passed)))]\n  // XXX only add in merge for now\n  // XXX bolt11 / address need to clearly indicate origin ao\n  // XXX book should be a list?\n}\n\nexport function cadToSats(cadAmt, spot) {\n  let sats = (parseFloat(cadAmt) / parseFloat(spot)) * satsPerBtc\n  return parseInt(sats)\n}\n\nexport function satsToCad(sats, spot) {\n  let cad = sats * (spot / satsPerBtc)\n  return cad.toFixed(2)\n}\n\nfunction calculateMsThisMonth() {\n  let today = new Date()\n  let daysThisMonth = new Date(today.getYear(), today.getMonth(), 0).getDate()\n  return daysThisMonth * 24 * 60 * 60 * 1000\n}\n\nexport function getMeridienTime(ts) {\n  let d = new Date(parseInt(ts))\n  let hour24 = d.getHours()\n\n  let rollover = 0\n  if (hour24 >= 24) {\n    rollover = 1\n    hour24 %= 24\n  }\n\n  let hour, meridien\n  if (hour24 > 12) {\n    meridien = 'pm'\n    hour = hour24 - 12\n  } else {\n    meridien = 'am'\n    hour = hour24\n  }\n\n  let date = d.getDate() + rollover\n  let month = d.getMonth() + 1\n  let minute = d.getMinutes()\n  let year = d.getFullYear()\n\n  let weekday = d.toString().slice(0, 3)\n\n  return { weekday, year, month, date, hour, minute, meridien }\n}\n","\nimport React from 'react';\nimport { Helmet } from 'react-helmet';\nimport store from './store';\n\ninterface CardProps {\n  match;\n}\n\ninterface RenderProps {\n  taskId: string;\n}\n\nclass RenderCard extends React.Component<RenderProps> {\n  constructor(props) {\n    super(props)\n  }\n  render() {\n    const aoStore = store.store;\n    const taskId = this.props.taskId\n    const card = aoStore.hashMap.get(taskId)\n    let cardText = ''\n    if (card.name === taskId) {\n      cardText = aoStore.memberById.get(taskId).name\n    } else if (card.guild) {\n      cardText = card.guild\n    } else {\n      cardText = card.name\n    }\n\n    if (cardText.length > 12) {\n      cardText = cardText.substring(0, 12) + ''\n    }\n    return (\n      <React.Fragment>\n        <Helmet>\n          <title>\n            {cardText} - {aoStore.state.cash.alias}\n          </title>\n        </Helmet>\n        {/* <AoDiscardZone />\n        <AoContextCard task={card} cardStyle={'full'} />\n        <AoHud /> */}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default class AoCard extends React.Component<CardProps> {\n  constructor(props) {\n    super(props);\n    const aoStore = store.store;\n    const card = aoStore.hashMap.get(this.props.match.params.taskId);\n    aoStore.setCurrentCard(this.props.match.params.taskId);\n  }\n\n  render() {\n    const aoStore = store.store;\n    return <RenderCard taskId={aoStore.currentCard} />\n  }\n}\n","\nimport crypto from 'crypto';\n\nexport function createHash(payload) {\n  let sha256 = crypto.createHash('sha256');\n  sha256.update(payload);\n  return sha256.digest('hex');\n}\n\nexport function hmacHex(data, signingKey) {\n  let hmac = crypto.createHmac('sha256', signingKey);\n  hmac.update(data);\n  return hmac.digest('hex')\n}","\nimport React, { useEffect, ReactElement } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport Login from './login';\nimport { hot } from 'react-hot-loader/root';\nimport { observer } from 'mobx-react';\nimport store from './store';\nimport AoMember from './member';\nimport AoCard from './card';\n\nexport const KEY_AUTH_DATA = 'KEY_AUTH_DATA';\n\n\nconst ProtectedRoute = ({ component: Comp, loggedIn, path, ...rest }) => {\n  return (\n    <Route\n      path={path}\n      {...rest}\n      render={props => {\n        return loggedIn ? <Comp {...props} /> : <Redirect to=\"/login\" />\n      }}\n    />\n  );\n}\n\nconst App = observer((): ReactElement => {\n  const aoStore = store.store;\n\n  console.log(\"App state: \", aoStore.state);\n\n  useEffect(() => document.body.classList.add('theme-1'));\n  \n  return (\n    <Switch>\n      <Route path=\"/login\" component={Login} />\n      <ProtectedRoute\n        path=\"/task/:taskId\"\n        component={AoCard}\n        loggedIn={aoStore.state.loggedIn}\n      />\n      <ProtectedRoute\n        path=\"/\"\n        component={AoMember}\n        loggedIn={aoStore.state.loggedIn}\n        exact={true}\n      />\n    </Switch>\n  );\n});\n\nexport default hot(App);","\nimport * as React from 'react';\nimport { FunctionComponent, useState } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport api from '../client/api'\nimport store from './store';\n\nconst Login: FunctionComponent<{}> = () => {\n  const aoStore = store.store;\n  const [user, setUser] = useState('');\n  const [pass, setPass] = useState('');\n  const onClick = e => {\n    api\n      .createSession(user, pass)\n      .then(api.fetchState)\n      .then(res => {\n        if (!res) {\n          setUser('');\n        }\n      });\n  }\n  const onKeyDown = e => {\n    if (e.key === 'Enter') {\n      e.preventDefault()\n      onClick(e)\n    }\n  }\n  \n  return (\n    <div>\n      {!aoStore.state.loggedIn && (\n        <form onSubmit={onKeyDown}>\n          <div>\n            Username:\n            <input\n              value={user}\n              type=\"text\"\n              onChange={e => setUser(e.target.value)}\n              onKeyDown={onKeyDown}\n            />\n          </div>\n          <div>\n            Password:\n            <input\n              value={pass}\n              type=\"password\"\n              onChange={e => setPass(e.target.value)}\n              onKeyDown={onKeyDown}\n            />\n          </div>\n          <button type=\"button\" onClick={onClick}>\n            Login\n          </button>\n        </form>\n      )}\n      {aoStore.state.loggedIn && <Redirect to=\"/\" />}\n    </div>\n  )\n}\n\nexport default Login\n","\nimport React from 'react';\nimport store from './store';\nimport { Redirect } from 'react-router-dom';\n\nconst AoMember: React.FunctionComponent<{}> = () => {\n  const aoStore = store.store;\n\treturn <Redirect to={'/task/' + aoStore.member.memberId} />;\n}\n\nexport default AoMember;\n","\n\nimport _ from 'lodash';\nimport * as calculations from './calculations';\n\nfunction aoMuts(aos, ev) {\n  switch (ev.type) {\n    case 'ao-linked':\n      aos.forEach((ao, i) => {\n        if (ao.address === ev.address) {\n          ao.links.push(ev.taskId);\n        }\n      });\n      break;\n    case 'ao-inbound-connected':\n      let inAddressConnect = aos.some(a => {\n        if (a.address === ev.address) {\n          a.inboundSecret = ev.secret;\n          a.lastContact = Date.now();\n          return true;\n        }\n      });\n      if (!inAddressConnect) {\n        let newEv = {\n          address: ev.address,\n          outboundSecret: false,\n          inboundSecret: ev.secret,\n          lastContact: Date.now(),\n          links: []\n        };\n        aos.push(newEv);\n      }\n      break;\n    case 'ao-outbound-connected':\n      let outAddressConnect = aos.some(a => {\n        if (a.address === ev.address) {\n          a.outboundSecret = ev.secret;\n          a.lastContact = Date.now();\n          return true;\n        }\n      });\n      if (!outAddressConnect) {\n        let newEv = {\n          address: ev.address,\n          outboundSecret: ev.secret,\n          inboundSecret: false,\n          lastContact: Date.now(),\n          links: []\n        };\n        aos.push(newEv);\n      }\n      break;\n    case 'ao-disconnected':\n      aos.forEach((ao, i) => {\n        if (ao.address === ev.address) {\n          aos.splice(i, 1);\n        }\n      });\n      break;\n  }\n}\n\nfunction cashMuts(cash, ev) {\n  switch (ev.type) {\n    case 'ao-named':\n      cash.alias = ev.alias;\n      break;\n    case 'spot-updated':\n      cash.spot = ev.spot;\n      break;\n    case 'currency-switched':\n      cash.currency = ev.currency;\n      break;\n    case 'rent-set':\n      cash.rent = parseFloat(ev.amount);\n      break;\n    case 'cap-set':\n      cash.cap = ev.amount;\n      break;\n    case 'funds-set':\n      cash.outputs = ev.outputs;\n      cash.channels = ev.channels;\n      break;\n    case 'task-boosted':\n      cash.usedTxIds.push(ev.txid);\n      break;\n    case 'task-boosted-lightning':\n      cash.pay_index = ev.pay_index;\n      break;\n    case 'get-node-info':\n      cash.info = ev.info;\n      break;\n  }\n}\n\nfunction membersMuts(members, ev) {\n  switch (ev.type) {\n    case 'ao-outbound-connected':\n      break;\n    case 'ao-disconnected':\n      break;\n    case 'member-created':\n      ev.lastUsed = ev.timestamp;\n      ev.muted = true;\n      members.push(ev);\n      break;\n    case 'member-activated':\n      members.forEach(member => {\n        if (member.memberId === ev.memberId) {\n          if (member.active < 0) {\n            member.active = -1 * member.active;\n          } else {\n            member.active++;\n          }\n        }\n      });\n      break;\n    case 'task-boosted':\n      members.forEach(member => {\n        if (member.memberId === ev.taskId) {\n          if (member.active < 0) {\n            member.active = -1 * member.active;\n          } else {\n            member.active++;\n          }\n        }\n      });\n      break;\n    case 'task-boosted-lightning':\n      members.forEach(member => {\n        if (member.memberId === ev.taskId) {\n          if (member.active < 0) {\n            member.active = -1 * member.active;\n          } else {\n            member.active++;\n          }\n        }\n      });\n      break;\n    case 'member-deactivated':\n      members.forEach(member => {\n        if (member.memberId === ev.memberId) {\n          if (member.active >= 0) {\n            member.active = -1 * member.active - 1;\n          }\n        }\n      });\n      break;\n    case 'member-purged':\n      for (let i = members.length - 1; i >= 0; i--) {\n        const member = members[i];\n        if (member.memberId === ev.memberId) {\n          members.splice(i, 1);\n        }\n      }\n      break;\n    case 'resource-used':\n      members.forEach(member => {\n        if (member.memberId === ev.memberId) {\n          member.lastUsed = ev.timestamp;\n        }\n      });\n      break;\n\n    case 'member-field-updated':\n      members.forEach(member => {\n        if (member.memberId === ev.memberId) {\n          member[ev.field] = ev.newfield;\n        }\n      });\n      break;\n\n    case 'member-ticker-set':\n      members.forEach(member => {\n        if (member.memberId === ev.memberId) {\n          if (!member.tickers) {\n            member.tickers = [];\n          }\n          if (!ev.symbol || ev.symbol.trim().length < 1) {\n            member.tickers.splice(ev.index, 1);\n          } else {\n            member.tickers[ev.index] = ev.symbol.trim().toLowerCase();\n          }\n        }\n      });\n      break;\n\n    case 'doge-barked':\n      members.forEach(member => {\n        // this should only bump up for mutual doges\n        if (member.memberId === ev.memberId) {\n          member.lastUsed = ev.timestamp;\n          // then bark\n        }\n      });\n      break;\n\n    case 'doge-muted':\n      members.forEach(member => {\n        if (member.memberId === ev.memberId) {\n          member.muted = true;\n        }\n      });\n      break;\n\n    case 'doge-unmuted':\n      members.forEach(member => {\n        if (member.memberId === ev.memberId) {\n          member.muted = false;\n        }\n      });\n      break;\n  }\n}\n\nfunction resourcesMuts(resources, ev) {\n  switch (ev.type) {\n    case 'resource-created':\n      let resourceIds = resources.map(r => r.resourceId);\n      if (resourceIds.indexOf(ev.resourceId) === -1) {\n        resources.push(ev);\n      } else {\n        console.log(\n          'BAD data duplicate resource rejected in mutation, dup resource task likely created'\n        );\n      }\n      break;\n    case 'resource-used':\n      resources.forEach(resource => {\n        if (resource.resourceId == ev.resourceId) {\n          resource.stock -= parseInt(ev.amount);\n        }\n      });\n      break;\n    case 'resource-purged':\n      resources.forEach((r, i) => {\n        if (r.resourceId === ev.resourceId) {\n          resources.splice(i, 1);\n        }\n      });\n      break;\n    case 'resource-stocked':\n      resources.forEach(resource => {\n        if (resource.resourceId == ev.resourceId) {\n          resource.stock += parseInt(ev.amount);\n        }\n      });\n      break;\n    case 'channel-created':\n      resources.forEach((r, i) => {\n        if (r.resourceId == ev.resourceId) {\n          r.pubkey = ev.pubkey;\n        }\n      });\n      break;\n  }\n}\n\nfunction memesMuts(memes, ev) {\n  switch (ev.type) {\n    case 'meme-added':\n      const fileHash = ev.data;\n      if (!memes.some(file => file.hash === ev.hash)) {\n        memes.push({\n          memeId: ev.taskId,\n          filename: ev.filename,\n          hash: ev.hash,\n          filetype: ev.filetype\n        });\n        console.log('added meme file: ', ev.filename);\n      } else {\n        console.log('meme file already in state: ', ev.filename);\n      }\n      break;\n  }\n}\n\nfunction sessionsMuts(sessions, ev) {\n  switch (ev.type) {\n    case 'session-created':\n      let idHasSession = sessions.some(session => {\n        // replace that sessions creds,\n        let match = false;\n        if (session.ownerId === ev.ownerId) {\n          match = true;\n          _.merge(session, ev);\n        }\n        return match; // true terminates the some loop & idHasSession->true too\n      })\n\n      if (idHasSession) {\n        // edited in session\n      } else {\n        // id didn't previously have session\n        sessions.push(ev);\n      }\n      break\n    case 'session-killed':\n      sessions.forEach((s, i) => {\n        if (s.session == ev.session) {\n          _.pullAt(sessions, i);\n        }\n      });\n      break;\n    case 'ao-outbound-connected':\n      sessions.push({\n        ownerId: ev.address,\n        token: ev.secret,\n        session: ev.address\n      });\n      break;\n  }\n}\n\nfunction tasksMuts(tasks, ev) {\n  switch (ev.type) {\n    case 'highlighted':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          let didUpdateInline = false;\n          task.highlights.forEach((h, i) => {\n            if (h.memberId === ev.memberId) {\n              didUpdateInline = true;\n              if (h.valence === ev.valence) {\n                task.highlights.splice(i, 1);\n              } else {\n                h.valence = ev.valence;\n              }\n            }\n          })\n          if (!didUpdateInline) {\n            task.highlights.push({\n              memberId: ev.memberId,\n              valence: ev.valence\n            });\n          }\n        }\n      })\n      break;\n    case 'ao-outbound-connected':\n      tasks.push(\n        calculations.blankCard(ev.address, ev.address, 'purple', ev.timestamp)\n      );\n      break;\n    case 'ao-disconnected':\n      break;\n    case 'resource-created':\n      tasks.push(\n        calculations.blankCard(\n          ev.resourceId,\n          ev.resourceId,\n          'red',\n          ev.timestamp\n        )\n      );\n      break;\n    case 'member-created':\n      tasks.push(\n        calculations.blankCard(ev.memberId, ev.memberId, 'blue', ev.timestamp)\n      );\n      break;\n    case 'member-purged':\n      break;\n\n    case 'meme-added':\n      tasks.push(\n        calculations.blankCard(ev.taskId, ev.filename, 'yellow', ev.timestamp)\n      );\n      break;\n    case 'task-created':\n      tasks.push(\n        calculations.blankCard(\n          ev.taskId,\n          ev.name,\n          ev.color,\n          ev.timestamp,\n          ev.deck,\n          ev.inId ? [ev.inId] : []\n        )\n      );\n      tasks.forEach(task => {\n        if (task.taskId === ev.inId) {\n          if (ev.prioritized) {\n            task.priorities = _.filter(task.subTasks, tId => tId !== ev.taskId);\n            task.priorities.push(ev.taskId);\n          } else {\n            task.subTasks = _.filter(task.subTasks, tId => tId !== ev.taskId);\n            task.subTasks.push(ev.taskId);\n          }\n        }\n      });\n      break;\n    case 'address-updated':\n      tasks.forEach(t => {\n        if (t.taskId === ev.taskId) {\n          t.address = ev.address;\n        }\n      });\n      break;\n    case 'task-passed':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          let pass = [ev.fromMemberId, ev.toMemberId];\n\n          if (!task.passed.some(p => p[0] === pass[0] && p[1] === pass[1])) {\n            task.passed.push(pass);\n          }\n        }\n      });\n      break;\n    case 'task-grabbed':\n      // First make sure they have a valid member card to grab with,\n      // since it will show up on the \"Where is this card\" list\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.passed = _.filter(task.passed, d => d[1] !== ev.memberId);\n          if (task.deck.indexOf(ev.memberId) === -1) {\n            if (ev.taskId !== ev.memberId && ev.memberId) {\n              task.deck.push(ev.memberId);\n            }\n          }\n        }\n      });\n      break;\n    case 'task-seen':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          if (!task.seen) {\n            task.seen = [];\n          }\n          if (\n            !task.seen.some(t => {\n              return t.memberId === ev.memberId;\n            })\n          ) {\n            task.seen.push({ memberId: ev.memberId, timestamp: Date.now() });\n          }\n        }\n      });\n      break;\n    case 'task-time-clocked':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          let found = task.time.find(t => t.memberId === ev.memberId);\n          if (!found) {\n            task.time.push({\n              memberId: ev.memberId,\n              timelog: [ev.seconds],\n              date: [ev.date]\n            });\n          } else {\n            if (!found.timelog) {\n              found.timelog = [];\n            }\n            if (!found.date) {\n              found.date = [];\n              if (found.timelog.length > found.date.length) {\n                let count = found.timelog.length - found.date.length;\n                while (count > 0) {\n                  found.date.push(null);\n                  count--;\n                }\n              }\n            }\n            found.timelog.push(ev.seconds);\n            found.date.push(ev.date);\n          }\n        }\n      })\n      break;\n    case 'pile-grabbed':\n      if (!ev.memberId) {\n        break;\n      }\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.passed = _.filter(task.passed, d => d[1] !== ev.memberId);\n          let crawler = [ev.taskId];\n          let history = [];\n          let newCards = [];\n          do {\n            newCards = [];\n            crawler.forEach(t => {\n              if (history.indexOf(t) >= 0) return;\n              let subTask = tasks.filter(pst => pst.taskId === t);\n              if (subTask.length < 1) {\n                // console.log(\n                //   'missing subtask, this is messy. parent task name: ',\n                //   task.name\n                // )\n                return;\n              }\n              if (subTask.length > 1) {\n                console.log('duplicate task found, this is very bad');\n              }\n              subTask = subTask[0];\n              if (\n                subTask === undefined ||\n                subTask.subTasks === undefined ||\n                subTask.priorities === undefined ||\n                subTask.completed === undefined\n              ) {\n                console.log('invalid task data found, this is very bad');\n                return;\n              }\n\n              history.push(t);\n\n              if (\n                subTask.deck.indexOf(ev.memberId) === -1 &&\n                ev.taskId !== ev.memberId\n              ) {\n                subTask.passed = _.filter(\n                  subTask.passed,\n                  d => d[1] !== ev.memberId\n                );\n                subTask.deck.push(ev.memberId);\n              }\n              newCards = newCards\n                .concat(subTask.subTasks)\n                .concat(subTask.priorities)\n                .concat(subTask.completed);\n            });\n            crawler = newCards;\n          } while (crawler.length > 0);\n        }\n      });\n      break;\n    case 'task-dropped':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.deck = _.filter(task.deck, d => d !== ev.memberId);\n        }\n      });\n      break;\n    case 'pile-dropped':\n      if (!ev.memberId) {\n        break;\n      }\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.passed = _.filter(task.passed, d => d[1] !== ev.memberId);\n          let crawler = [ev.taskId];\n          let history = [];\n          let newCards = [];\n          do {\n            newCards = [];\n            crawler.forEach(t => {\n              if (history.indexOf(t) >= 0) return;\n              let subTask = tasks.filter(pst => pst.taskId === t);\n              if (subTask.length < 1) {\n                console.log('missing subtask, this is messy');\n                return;\n              }\n              if (subTask.length > 1) {\n                console.log('duplicate task found, this is very bad');\n              }\n              subTask = subTask[0];\n              if (\n                subTask === undefined ||\n                subTask.subTasks === undefined ||\n                subTask.priorities === undefined ||\n                subTask.completed === undefined\n              ) {\n                console.log('invalid task data found, this is very bad');\n                return;\n              }\n\n              history.push(t);\n\n              if (\n                subTask.deck.indexOf(ev.memberId) >= 0 &&\n                ev.taskId !== ev.memberId\n              ) {\n                subTask.passed = _.filter(\n                  subTask.passed,\n                  d => d[1] !== ev.memberId\n                );\n                subTask.deck = _.filter(subTask.deck, d => d !== ev.memberId);\n              }\n              newCards = newCards\n                .concat(subTask.subTasks)\n                .concat(subTask.priorities)\n                .concat(subTask.completed);\n            });\n            crawler = newCards;\n          } while (crawler.length > 0);\n        }\n      });\n      break;\n    case 'member-purged':\n      for (let i = tasks.length - 1; i >= 0; i--) {\n        const task = tasks[i];\n        if (task.taskId === ev.memberId) {\n          tasks.splice(i, 1);\n        }\n      }\n      tasks.forEach((t, j) => {\n        t.subTasks = t.subTasks.filter(st => st !== ev.memberId);\n        t.priorities = t.priorities.filter(st => st !== ev.memberId);\n        t.completed.filter(st => st !== ev.memberId);\n        t.claimed = t.claimed.filter(st => st !== ev.memberId);\n        t.deck = t.deck.filter(st => st !== ev.memberId);\n        t.passed = t.passed.filter(\n          p => !(p[0] === ev.memberId || p[1] === ev.memberId)\n        );\n        if (_.has(t, 'grid.rows')) {\n          Object.entries(t.grid.rows).forEach(([y, row]) => {\n            Object.entries(row).forEach(([x, cell]) => {\n              if (cell === ev.memberId) {\n                delete tasks[j].grid.rows[y][x];\n              }\n            });\n            if (row.length === 0) {\n              delete tasks[j].grid.rows[y];\n            }\n          });\n        }\n      });\n      break;\n    case 'task-removed':\n      for (let i = tasks.length - 1; i >= 0; i--) {\n        const task = tasks[i];\n        if (task.taskId === ev.taskId) {\n          tasks.splice(i, 1);\n        }\n      }\n      tasks.forEach((t, i) => {\n        t.subTasks = t.subTasks.filter(st => st !== ev.taskId);\n        t.priorities = t.priorities.filter(st => st !== ev.taskId);\n        t.completed = _.filter(t.completed, st => st !== ev.taskId);\n        if (_.has(t, 'grid.rows')) {\n          Object.entries(t.grid.rows).forEach(([y, row]) => {\n            Object.entries(row).forEach(([x, cell]) => {\n              if (cell === ev.taskId) {\n                delete tasks[i].grid.rows[y][x];\n              }\n            })\n            if (row.length === 0) {\n              delete tasks[i].grid.rows[y];\n            }\n          })\n        }\n      });\n      break;\n    case 'tasks-removed':\n      for (let i = tasks.length - 1; i >= 0; i--) {\n        const task = tasks[i]\n        if (ev.taskIds.includes(task.taskId)) {\n          tasks.splice(i, 1);\n        }\n      }\n      tasks.forEach((t, i) => {\n        t.subTasks = t.subTasks.filter(st => !ev.taskIds.includes(st));\n        t.priorities = t.priorities.filter(st => !ev.taskIds.includes(st));\n        t.completed = _.filter(t.completed, st => !ev.taskIds.includes(st));\n        if (_.has(t, 'grid.rows')) {\n          Object.entries(t.grid.rows).forEach(([y, row]) => {\n            Object.entries(row).forEach(([x, cell]) => {\n              if (ev.taskIds.includes(cell)) {\n                delete tasks[i].grid.rows[y][x];\n              }\n            })\n            if (row.length === 0) {\n              delete tasks[i].grid.rows[y];\n            }\n          });\n        }\n      });\n      break;\n    case 'task-prioritized':\n      tasks.forEach(task => {\n        if (task.taskId === ev.inId) {\n          task.priorities = _.filter(\n            task.priorities,\n            taskId => taskId !== ev.taskId\n          );\n          task.subTasks = _.filter(\n            task.subTasks,\n            taskId => taskId !== ev.taskId\n          );\n          task.completed = _.filter(\n            task.completed,\n            taskId => taskId !== ev.taskId\n          );\n          // if (ev.position) {\n          //   task.priorities = task.priorities.splice(ev.position, 0, ev.taskId)\n          // } else {\n          // console.log('task-prioritized position is ', ev.position)\n          task.priorities.push(ev.taskId);\n          // }\n        }\n        if (task.taskId === ev.taskId) {\n          if (!_.has(task, 'parents') || !Array.isArray(task.parents)) {\n            task.parents = [];\n          }\n\n          if (!task.parents.some(pId => pId === ev.inId)) {\n            task.parents.push(ev.inId);\n          }\n        }\n      });\n      break;\n    case 'pile-prioritized':\n      tasks.forEach(task => {\n        if (task.taskId === ev.inId) {\n          task.priorities = task.priorities.concat(task.subTasks);\n          task.subTasks = [];\n        }\n      });\n      break;\n    case 'task-refocused':\n      let claimed;\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          claimed = task.claimed;\n        }\n      });\n      tasks.forEach(task => {\n        if (task.taskId === ev.inId) {\n          task.priorities = _.filter(\n            task.priorities,\n            taskId => taskId !== ev.taskId\n          );\n          task.subTasks = _.filter(\n            task.subTasks,\n            taskId => taskId !== ev.taskId\n          );\n          if (claimed && claimed.length >= 1) {\n            if (!task.completed.some(tId => tId === ev.taskId)) {\n              task.completed.push(ev.taskId);\n            }\n          } else if (claimed !== undefined) {\n            task.subTasks.push(ev.taskId);\n          }\n        }\n      });\n      break;\n    case 'pile-refocused':\n      tasks.forEach(task => {\n        if (task.taskId === ev.inId) {\n          task.priorities.forEach(stId => {\n            tasks.forEach(st => {\n              if (st.taskId === stId) {\n                if (st.claimed && st.claimed.length >= 1) {\n                  task.completed.push(stId);\n                } else {\n                  task.subTasks.push(stId);\n                }\n              }\n            });\n            task.priorities = [];\n          });\n        }\n      });\n      break;\n    case 'task-sub-tasked':\n      // I think the spec is only run on event creation, not load from database,\n      // so make sure the task exists before linking to it from another card\n      let taskExists = false;\n      tasks.forEach(task => {\n        if (task.taskId === ev.subTask) {\n          taskExists = true;\n          task.passed = _.filter(task.passed, d => d[1] !== ev.memberId);\n          if (ev.memberId && task.deck.indexOf(ev.memberId) === -1) {\n            if (ev.subTask !== ev.memberId) {\n              task.deck.push(ev.memberId);\n            }\n          }\n          if (!_.has(task, 'parents') || !Array.isArray(task.parents)) {\n            console.log(\n              'Task with missing parents found in task-sub-tasked. This should never happen.'\n            );\n            task.parents = [];\n          }\n\n          if (!task.parents.some(pId => pId === ev.taskId)) {\n            task.parents.push(ev.taskId);\n          }\n        }\n      })\n      if (taskExists) {\n        tasks.forEach(task => {\n          if (task.taskId === ev.taskId) {\n            task.subTasks = _.filter(task.subTasks, tId => tId !== ev.subTask);\n            task.subTasks.push(ev.subTask);\n          }\n        })\n      } /*else { */\n      // console.log(\n      //   'A task with references to subTasks that are missing was found in an event in the database. This should have been filtered before storing.'\n      // )\n      // }\n      break;\n    case 'task-de-sub-tasked':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.passed = _.filter(task.passed, d => d[1] !== ev.memberId);\n          task.subTasks = _.filter(task.subTasks, tId => tId !== ev.subTask);\n          task.completed = _.filter(task.completed, tId => tId !== ev.subTask);\n        }\n        if (task.taskId === ev.subTask) {\n          task.parents = _.filter(task.parents, tId => tId !== ev.taskId);\n        }\n      });\n      break;\n    case 'task-guilded':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.guild = ev.guild;\n        }\n      });\n      break;\n    case 'task-valued':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.completeValue = Number(ev.value);\n        }\n      });\n      break;\n    case 'task-colored':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.color = ev.color;\n        }\n        if (ev.inId && task.taskId === ev.inId) {\n          task.subTasks = _.filter(task.subTasks, tId => tId !== ev.taskId);\n          task.subTasks.push(ev.taskId);\n        }\n      });\n      break;\n    case 'task-claimed':\n      let bounty = 0;\n      tasks.forEach(task => {\n        // let found = false\n        if (task.taskId === ev.memberId) {\n          task.boost += parseFloat(ev.paid);\n        }\n\n        // task.priorities.some(taskId => {\n        //   if (taskId !== ev.taskId) {\n        //     return false\n        //   } else {\n        //     found = true\n        //     return true\n        //   }\n        // })\n\n        // task.subTasks.some(taskId => {\n        //   if (taskId !== ev.taskId) {\n        //     return false\n        //   } else {\n        //     found = true\n        //     return true\n        //   }\n        // })\n\n        // if (found) {\n        //   if (task.priorities.indexOf(ev.taskId) === -1) {\n        //     task.subTasks = _.filter(task.subTasks, tId => tId !== ev.subTask)\n        //     task.completed = _.filter(task.completed, tId => tId !== ev.subTask)\n        //     task.completed.push(ev.taskId)\n        //   }\n        // }\n        if (task.taskId === ev.taskId) {\n          task.passed = _.filter(task.passed, d => d[1] !== ev.memberId);\n          if (task.deck.indexOf(ev.memberId) === -1) {\n            if (ev.taskId !== ev.memberId && ev.memberId) {\n              task.deck.push(ev.memberId);\n            }\n          }\n          if (task.claimed.indexOf(ev.memberId) === -1) {\n            task.claimed.push(ev.memberId);\n          }\n          task.lastClaimed = ev.timestamp;\n        }\n      });\n      break;\n    case 'task-unclaimed':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.claimed = task.claimed.filter(mId => mId !== ev.memberId);\n          if (task.claimed.length < 1) {\n            tasks.forEach(p => {\n              if (\n                p.priorities.indexOf(ev.taskId) === -1 &&\n                p.completed.indexOf(ev.taskId) > -1\n              ) {\n                p.completed = p.completed.filter(taskId => taskId !== ev.taskId);\n                p.subTasks = p.subTasks.filter(taskId => taskId !== ev.taskId);\n                p.subTasks.push(ev.taskId);\n              }\n            });\n          }\n        }\n      });\n      break;\n    case 'task-boosted':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          let amount = parseFloat(ev.amount);\n          let boost = parseFloat(task.boost);\n          if (amount > 0) {\n            task.boost = amount + boost;\n            task.address = '';\n          }\n        }\n      });\n      break;\n    case 'task-boosted-lightning':\n      tasks.forEach(task => {\n        if (task.payment_hash === ev.payment_hash) {\n          let amount = parseFloat(ev.amount);\n          let boost = parseFloat(task.boost);\n          if (amount > 0) {\n            task.boost = amount + boost;\n            task.bolt11 = '';\n            task.payment_hash = '';\n          }\n        }\n      });\n      break;\n    case 'resource-booked':\n      tasks.forEach(task => {\n        if (task.taskId === ev.resourceId) {\n          task.book = ev;\n        }\n      });\n      break;\n    case 'resource-used':\n      tasks.forEach(task => {\n        let charged = parseFloat(ev.charged);\n        if (charged > 0) {\n          if (task.taskId === ev.memberId) {\n            task.boost -= charged;\n          }\n          if (task.taskId === ev.resourceId) {\n            task.boost += charged;\n          }\n        }\n      });\n      break;\n    case 'invoice-created':\n      tasks.forEach(task => {\n        if (task.taskId === ev.taskId) {\n          task.payment_hash = ev.payment_hash\n          task.bolt11 = ev.bolt11\n        }\n      });\n      break;\n    case 'task-swapped':\n      let task;\n      tasks.forEach(t => {\n        if (t.taskId === ev.taskId) {\n          task = t;\n        }\n      });\n\n      if (task) {\n        let originalIndex = task.subTasks.indexOf(ev.swapId1);\n        let swapIndex = task.subTasks.indexOf(ev.swapId2);\n\n        let originalIndexCompleted = task.completed.indexOf(ev.swapId1);\n        let swapIndexCompleted = task.completed.indexOf(ev.swapId2);\n\n        if (originalIndex > -1 && swapIndex > -1) {\n          let newST = task.subTasks.slice();\n          newST[originalIndex] = ev.swapId2;\n          newST[swapIndex] = ev.swapId1;\n          task.subTasks = newST;\n        }\n\n        if (originalIndexCompleted > -1 && swapIndexCompleted > -1) {\n          let newCompleted = task.completed.slice();\n          newCompleted[originalIndexCompleted] = ev.swapId2;\n          newCompleted[swapIndexCompleted] = ev.swapId1;\n          task.completed = newCompleted;\n        }\n      }\n      break;\n    case 'task-bumped':\n      let taskB;\n      tasks.forEach(t => {\n        if (t.taskId === ev.taskId) {\n          taskB = t;\n        }\n      });\n\n      if (taskB) {\n        let originalIndex = taskB.subTasks.indexOf(ev.bumpId);\n        let originalIndexCompleted = taskB.completed.indexOf(ev.bumpId);\n        if (\n          originalIndex === taskB.subTasks.length - 1 &&\n          ev.direction === -1\n        ) {\n          let newST = [ev.bumpId];\n          newST = newST.concat(\n            taskB.subTasks.slice(0, taskB.subTasks.length - 1)\n          );\n          taskB.subTasks = newST;\n        }\n\n        if (originalIndex === 0 && ev.direction === 1) {\n          let newST = taskB.subTasks.slice(1);\n          newST.push(ev.bumpId);\n          taskB.subTasks = newST;\n        }\n      }\n      break;\n    case 'tasks-received':\n      const startLength = tasks.length;\n      let changedIndexes = [];\n      ev.tasks.forEach(newT => {\n        if (\n          !tasks.some((cur, i) => {\n            if (cur.taskId === newT.taskId) {\n              calculations.safeMerge(cur, newT)\n              changedIndexes.push(i)\n              return true\n            }\n          })\n        ) {\n          let safeClone = calculations.blankCard(\n            newT.taskId,\n            newT.name,\n            newT.color,\n            newT.timestamp,\n            newT.parents,\n            newT.height\n          );\n          calculations.safeMerge(safeClone, newT);\n          tasks.push(safeClone);\n          changedIndexes.push(tasks.length - 1);\n        }\n      });\n      // Loop through the new cards and remove invalid references to cards that don't exist on this server\n      changedIndexes.forEach(tId => {\n        const t = tasks[tId];\n        let beforeLength = t.subTasks.length;\n        let filtered = [];\n        t.subTasks = _.filter(t.subTasks, stId => {\n          if (tasks.some(sst => sst.taskId === stId)) {\n            filtered.push(stId);\n            return true;\n          }\n          return false;\n        });\n        t.priorities = t.priorities.filter(stId =>\n          tasks.some(sst => sst.taskId === stId)\n        );\n        t.completed = t.completed.filter(stId =>\n          tasks.some(sst => sst.taskId === stId)\n        );\n        t.deck = t.deck.filter(stId =>\n          tasks.some(sst => sst.taskId === stId && sst.taskId === sst.name)\n        );\n        // Grids are not received yet (because they did not exist when p2p AO was previously implemented)\n        // so they do not need to be checked for valid references to other cards (yet)\n      })\n      break;\n    case 'member-charged':\n      tasks.forEach(task => {\n        if (task.taskId === ev.memberId) {\n          task.boost -= parseFloat(ev.charged);\n          if (task.boost < 0) {\n            task.boost = 0;\n          }\n        }\n      })\n      break\n    case 'grid-created':\n      tasks.push(\n        calculations.blankCard(\n          ev.taskId,\n          ev.name,\n          ev.color,\n          ev.timestamp,\n          ev.deck,\n          ev.height,\n          ev.width\n        )\n      );\n      break;\n    case 'grid-added':\n      tasks.forEach((task, i) => {\n        if (task.taskId === ev.taskId) {\n          task.grid = calculations.blankGrid(ev.height, ev.width)\n        }\n      });\n      break;\n    case 'grid-resized':\n      tasks.forEach((task, i) => {\n        if (task.taskId === ev.taskId) {\n          if (!task.grid) {\n            task.grid = calculations.blankGrid(ev.height, ev.width);\n          }\n          task.grid.height = ev.height;\n          task.grid.width = ev.width;\n          Object.entries(task.grid.rows).forEach(([y, row]) => {\n            Object.entries(row).forEach(([x, cell]) => {\n              if (x >= ev.width || y >= ev.height) {\n                tasks.forEach(st => {\n                  if (st.taskId === cell) {\n                    task.subTasks = _.filter(\n                      task.subTasks,\n                      taskId => taskId !== cell\n                    );\n                    task.completed = _.filter(\n                      task.completed,\n                      taskId => taskId !== cell\n                    );\n                    if (st.claimed && st.claimed.length >= 1) {\n                      task.completed.push(cell);\n                    } else {\n                      task.subTasks.unshift(cell);\n                    }\n                  }\n                });\n                delete tasks[i].grid.rows[y][x];\n              }\n            });\n            if (row.length === 0) {\n              delete tasks[i].grid.rows[y];\n            }\n          });\n        }\n      });\n      break;\n    case 'grid-pin':\n      tasks.forEach((task, i) => {\n        if (task.taskId === ev.inId) {\n          if (!task.grid) {\n            task.grid = calculations.blankGrid();\n          }\n          if (!_.has(task, 'grid.rows.' + ev.y)) {\n            tasks[i].grid.rows[ev.y] = {};\n          }\n          tasks[i].grid.rows[ev.y][ev.x] = ev.taskId;\n        }\n        // Same as task-sub-tasked: Grab the card and removed the pass from it, if any. And add parents.\n        if (task.taskId === ev.taskId) {\n          // task.passed = _.filter(task.passed, d => d[1] !== ev.memberId)\n          // if (ev.memberId && task.deck.indexOf(ev.memberId) === -1) {\n          //   if (ev.taskId !== ev.memberId) {\n          //     task.deck.push(ev.memberId)\n          //   }\n          // }\n          if (!_.has(task, 'parents') || !Array.isArray(task.parents)) {\n            task.parents = [];\n          }\n          if (!task.parents.some(pId => pId === ev.inId)) {\n            task.parents.push(ev.inId);\n          }\n        }\n\n        task.subTasks = task.subTasks.filter(st => st !== ev.taskId);\n      });\n      break;\n    case 'grid-unpin':\n      tasks.some((task, i) => {\n        if (task.taskId == ev.inId) {\n          if (!_.has(task, 'grid.rows.' + ev.y)) {\n            return false;\n          }\n          let gridTaskId = tasks[i].grid.rows[ev.y][ev.x];\n          delete tasks[i].grid.rows[ev.y][ev.x];\n          if (task.grid.rows[ev.y].length == 0) {\n            delete tasks[i].grid.rows[ev.y];\n          }\n          if (tasks.some(t => t.taskId === gridTaskId)) {\n            task.subTasks = task.subTasks.filter(st => st !== gridTaskId);\n            task.subTasks.unshift(gridTaskId);\n          }\n          return true;\n        }\n      });\n      break;\n  }\n}\n\nexport function applyEvent(state, ev) {\n  cashMuts(state.cash, ev);\n  membersMuts(state.members, ev);\n  resourcesMuts(state.resources, ev);\n  memesMuts(state.memes, ev);\n  sessionsMuts(state.sessions, ev);\n  tasksMuts(state.tasks, ev);\n  aoMuts(state.ao, ev);\n}\n\nfunction setCurrentCash(cash, current) {\n  cash.alias = current.cash.alias;\n  cash.address = current.cash.address;\n  cash.spot = current.cash.spot;\n  cash.currency = current.cash.currency;\n  cash.rent = current.cash.rent;\n  cash.cap = current.cash.cap;\n  cash.usedTxIds = current.cash.usedTxIds;\n  cash.outputs = current.cash.outputs;\n  cash.channels = current.cash.channels;\n  cash.info = current.cash.info;\n  cash.pay_index = current.cash.pay_index;\n}\n\nfunction setCurrentTasks(tasks, current) {\n  tasks.forEach((task, i) => {\n    delete tasks[i];\n  })\n  tasks.length = 0;\n  current.tasks.forEach(task => {\n    tasks.push(task);\n    // _.assign(tasks[index].grid, task.grid) // does not solve the +grid not rerendering glitch... or does it?\n  });\n}\n\nfunction setCurrentSessions(sessions, current) {\n  sessions.length = 0;\n  current.sessions.forEach(session => {\n    sessions.push(session);\n  });\n}\n\nfunction setCurrentAO(aos, current) {\n  aos.length = 0\n  current.ao.forEach(a => {\n    aos.push(a);\n  });\n}\n\nfunction setCurrentMembers(members, current) {\n  members.length = 0;\n  current.members.forEach(member => {\n    members.push(member);\n  });\n}\n\nfunction setCurrentResources(resources, current) {\n  resources.length = 0;\n  current.resources.forEach(resource => {\n    resources.push(resource);\n  });\n}\n\nfunction setCurrentMemes(memes, current) {\n  memes.length = 0;\n  if (!current.memes) {\n    current.memes = [];\n  }\n  current.memes.forEach(meme => {\n    memes.push(meme);\n  });\n}\n\nexport function setCurrent(state, current) {\n  setCurrentCash(state.cash, current);\n  setCurrentTasks(state.tasks, current);\n  setCurrentSessions(state.sessions, current);\n  setCurrentAO(state.ao, current);\n  setCurrentMembers(state.members, current);\n  setCurrentResources(state.resources, current);\n  setCurrentMemes(state.memes, current);\n}\n","\nimport { observable, computed, observe, action } from 'mobx';\nimport _ from 'lodash';\nimport { applyEvent, setCurrent } from './mutations';\n\nexport interface Session {\n  type: 'session-created'\n  session: string\n  ownerId: string\n  timestamp: Date\n}\n\nexport interface Member {\n  type: 'member-created'\n  name: string\n  secret: string\n  memberId: string\n  address: string\n  active: number\n  balance: number\n  badges: []\n  tickers: string[]\n  info: {}\n  timestamp: number\n  lastUsed: Date\n  muted: Boolean\n}\n\nexport interface Grid {}\n\nexport interface Task {}\n\nexport interface Meme {}\n\nexport interface PublicState {\n  ao: number[]\n  sessions: Session[]\n  members: Member[]\n  tasks: Task[]\n  resources: []\n  memes: Meme[]\n  cash: {\n    address: string\n    alias: string\n    currency: string\n    spot: number\n    rent: number\n    cap: number\n    pay_index: number\n    usedTxIds: number[]\n    outputs: number[]\n    channels: number[]\n    info: {}\n  }\n}\n\nexport const serverState: PublicState = {\n  ao: [],\n  sessions: [],\n  members: [],\n  tasks: [],\n  resources: [],\n  memes: [],\n  cash: {\n    address: '',\n    alias: '',\n    currency: 'CAD',\n    spot: 0,\n    rent: 0,\n    cap: 75,\n    pay_index: 0,\n    usedTxIds: [],\n    outputs: [],\n    channels: [],\n    info: {}\n  }\n};\n\nexport const pubState: PublicState = {\n  ao: [],\n  sessions: [],\n  members: [],\n  tasks: [],\n  resources: [],\n  memes: [],\n  cash: {\n    address: '',\n    alias: '',\n    currency: 'CAD',\n    spot: 0,\n    rent: 0,\n    cap: 75,\n    pay_index: 0,\n    usedTxIds: [],\n    outputs: [],\n    channels: [],\n    info: {}\n  }\n};\n\nexport interface AoState extends PublicState {\n  session: string\n  token: string\n  loggedIn: boolean\n  user: string\n}\n\nconst defaultState: AoState = {\n  session: '',\n  token: '',\n  user: '',\n  loggedIn: false,\n  ...pubState\n};\n\nexport class AoStore {\n  state: AoState = defaultState;\n\n  constructor(state: AoState) {\n    this.state = observable(state);\n  }\n\n  @computed get member(): Member {\n    let loggedInMember: Member\n    this.state.sessions.forEach(session => {\n      if (this.state.session === session.session) {\n        console.log('found existing session')\n        const memberId = session.ownerId\n        this.state.members.forEach(m => {\n          if (m.memberId === memberId) {\n            loggedInMember = m\n          }\n        })\n      }\n    })\n    return loggedInMember\n  }\n  \n  @computed get hashMap(): Map<string, Task> {\n    let hashMap: Map<string, Task> = new Map()\n    this.state.tasks.forEach(t => {\n      hashMap.set(t.taskId, t)\n    })\n    return hashMap\n  }\n\n  @action.bound\n  initializeState(state: AoState) {\n    Object.keys(state).forEach(key => Object.assign(this.state[key], state[key]));\n  }\n  \n  @action.bound\n  applyEvent(ev) {\n    applyEvent(this.state, ev);\n  }\n\n  @action.bound\n  setCurrentCard(taskId: string) {\n    this.currentCard = taskId\n  }\n}\n\nexport function applyBackup(backup) {\n  console.log(\"backup:\", backup)\n  let server = Object.assign({}, backup);\n  setCurrent(serverState, server);\n  backup.memes = backup.memes && backup.memes.length > 0 ? backup.memes.map(removeSensitive) : [];\n  backup.resources = backup.resources.map(removeSensitive);\n  backup.members = backup.members.map(removeSensitive);\n  backup.ao = backup.ao.map(removeSensitive);\n  backup.tasks = backup.tasks.map(removeSensitive);\n  setCurrent(pubState, backup);\n}\n\nexport function removeSensitive(value) {\n  let secretStuff = [\n    'fob',\n    'secret',\n    'token',\n    'email',\n    'payment_hash',\n    'inboundSecret',\n    'outboundSecret'\n  ]\n  if (value.type === 'member-field-updated') {\n    ['fob', 'secret', 'email'].forEach(str => {\n      if (value.field === str) {\n        secretStuff.push('newfield')\n      }\n    })\n  }\n  return _.omit(value, secretStuff)\n}\n\nconst aoStore = {};\n\nexport default aoStore;\n\nexport function createAoStore(state) {\n  aoStore.store = new AoStore(state);\n}","\nimport io from 'socket.io-client';\nimport request from 'superagent';\nimport { v1 as uuidV1 } from 'uuid';\n\nimport { createHash, hmacHex } from '../app/crypto';\nimport store from '../app/store';\n\nclass AoApi {\n  constructor(public socket) {}\n\n  startSocketListeners() {\n    const aoStore = store.store;\n    this.socket.connect();\n    this.socket.on('connect', () => {\n      console.log('socket connected');\n\n      const { session, token } = aoStore.state;\n\n      console.log(\"Session and token: \", session, token);\n\n      this.socket.emit('authentication', {\n        session: session,\n        token: token\n      });\n    });\n    this.socket.on('authenticated', () => {\n      console.log('authenticated')\n      this.socket.on('eventstream', ev => {\n        console.log('event', ev);\n        aoStore.applyEvent(ev);\n      });\n    });\n    this.socket.on('disconnect', reason => {\n      console.log('disconnected');\n      this.socket.connect();\n    });\n  }\n\n  async createSession(user: string, pass: string): Promise<boolean> {\n    const session = uuidV1();\n    const sessionKey = createHash(session + createHash(pass));\n    const token = hmacHex(session, sessionKey);\n    return request\n      .post('/session')\n      .set('authorization', token)\n      .set('session', session)\n      .set('name', user)\n      .on('error', () => false)\n      .then(res => {\n        aoStore.state.token = token;\n        aoStore.state.session = session;\n        aoStore.state.user = user;\n        \n        window.localStorage.setItem('user', user);\n        window.localStorage.setItem('token', token);\n        window.localStorage.setItem('session', session);\n\n        return true;\n      });\n  }\n \n  async fetchState(): Promise<boolean> {\n    const session = window.localStorage.getItem('session')\n    const token = window.localStorage.getItem('token')\n    const user = window.localStorage.getItem('user')\n    \n    return request\n      .post('/state')\n      .set('Authorization', token)\n      .set('session', session)\n      .set('name', user)\n      .then(res => {\n        aoStore.state.session = session;\n        aoStore.state.token = token;\n        aoStore.state.user = user;\n        aoStore.state.loggedIn = true;\n          \n        aoStore.initializeState(res.body);\n        return true;\n      })\n      .catch(() => false);\n  }\n}\n\nconst socket = io.connect(\n  '/',\n  {\n    autoConnect: false\n  }\n)\nconst api = new AoApi(socket);\nexport default api;\n","\nimport { Router } from 'express';\nimport { pubState } from '../app/store';\n\nconst router = Router();\n\nrouter.post('/state', (req, res) => {\n  res.json(pubState);\n})\n\nexport default router;\n","\nimport { Router } from 'express';\nimport { serverState } from '../../app/store';\nimport { createHash, hmacHex } from '../../app/crypto';\nimport events from '../events';\n\nfunction getIdSecret(identifier: string) {\n  let ownerId, secret;\n\n  identifier = identifier && identifier.toLowerCase();\n\n  serverState.members.forEach(member => {\n    if (member.name.toLowerCase() === identifier || member.memberId === identifier) {\n      ownerId = member.memberId;\n      secret = member.secret;\n    }\n  });\n\n  serverState.resources.forEach(resource => {\n    if (resource.name === identifier || resource.resourceId === identifier) {\n      ownerId = resource.resourceId;\n      secret = resource.secret;\n    }\n  });\n\n  return { ownerId, secret };\n}\n\nfunction authorized(req) {\n  if (serverState.sessions.map(session => session.token).includes(req.headers.authorization)) {\n    return true;\n  }\n  return false;\n}\n\nfunction endpoint() {\n  return (req, res) => {\n    if (authorized(req)) {\n      return res.status(404).end('not found');\n    }\n\n    const { ownerId, secret } = getIdSecret(req.headers.name);\n\n    if (secret && req.headers.authorization && req.headers.session) {\n      let sessionKey = createHash(req.headers.session + secret);\n      let token = hmacHex(req.headers.session, sessionKey);\n      \n      if (token === req.headers.authorization) {\n        // client able to create the token, must have secret\n        events.sessionCreated(\n          ownerId,\n          req.headers.session,\n          token,\n          (err, dbResponse) => {\n            if (err) {\n              res.status(500).send(err);\n            } else {\n              req.session.token = token;\n              req.session.name = req.headers.name;\n              req.session.session = req.headers.session;\n              res.status(201).send(dbResponse);\n            }\n          }\n        );\n      } else {\n        res.status(401).end('unauthorized');\n      }\n    } else {\n      res.status(401).end('unauthorized')\n    }\n  };\n}\n\nfunction middleware() {\n  return (req, res, next) => {\n    if (req.url.startsWith('/js')) {\n      return next();\n    }\n    if (req.url === \"/__webpack_hmr\") {\n      return next();\n    }\n    if (/[0-9a-f]+\\.hot-update.js/.test(req.url)) {\n      return next();\n    }\n    if (req.url.startsWith('/css')) {\n      return next();\n    }\n\n    if (authorized(req)) {\n      return next();\n    } \n    \n    res.status(401).end('unauthorized');\n  };\n}\n\nconst router = Router();\n\nrouter.post('/session', endpoint());\nrouter.use(middleware());\n\nexport default router;\n","\nimport { serverState } from '../../app/store';\n\nexport default function authenticate(_socket, data, callback) {\n  let authorized;\n\n  serverState.sessions.forEach(session => {\n    if (session.token === data.token) {\n      authorized = true;\n    }\n  })\n  console.log('socket auth triggered:', authorized);\n  callback(null, authorized);\n}\n","\nimport db from 'better-sqlite3';\nimport { v1 as uuidV1 } from 'uuid';\nimport { stream } from 'kefir';\nimport { createHash, hmacHex } from '../app/crypto';\n\nexport let eventEmitter, shadowEmitter;\n\nexport const changeFeed = stream(e => {\n  eventEmitter = e;\n});\n\nexport const shadowFeed = stream(e => {\n  shadowEmitter = e;\n});\n\nclass DB {\n  conn = null;\n  preparedStmts = {};\n\n  public startDb(path: string) {\n    this.conn = db(path, {});\n    let checkTable = this.conn.prepare(\n      \"SELECT name FROM sqlite_master WHERE type='table' AND name='events'\"\n    );\n  \n    if (checkTable.all().length == 0) {\n      this.initializeSqlite();\n    } else {\n      this.createStatements();\n    }\n  }\n\n  public initializeSqlite() {\n    let err;\n    const initDb = this.conn.prepare(\n      'CREATE TABLE `events` ( `document` BLOB NOT NULL, `timestamp` INTEGER UNIQUE, PRIMARY KEY(`timestamp`) )'\n    )\n    const initBackups = this.conn.prepare(\n      'CREATE TABLE `backups` ( `document` BLOB NOT NULL, `timestamp` INTEGER UNIQUE, PRIMARY KEY(`timestamp`) )'\n    )\n    initDb.run()\n    initBackups.run()\n    this.createStatements();\n  \n    this.insertEvent({\n      type: 'member-created',\n      name: 'dctrl',\n      fob: '0000000000',\n      secret: createHash('dctrl'), // init user-password is dctrl\n      memberId: uuidV1(),\n      address: '2Mz6BQSTkmK4WHCntwNfvdSfWHddTqQX4vu',\n      active: 1,\n      balance: 0,\n      badges: [],\n      info: {}\n    });\n    this.startFeed();\n  }\n\n  createStatements() {\n    this.conn.function('eventFeed', doc => {\n      eventEmitter.emit(JSON.parse(doc))\n    });\n    this.preparedStmts.getAll = this.conn.prepare(\n      'SELECT document FROM events WHERE (timestamp > ?) ORDER BY timestamp'\n    ); // WHERE (timestamp > ?)\n    this.preparedStmts.insertEvent = this.conn.prepare('INSERT INTO events VALUES (?, ?)');\n    this.preparedStmts.insertBackup = this.conn.prepare('INSERT INTO backups VALUES (?, ?)');\n    this.preparedStmts.recover = this.conn.prepare(\n      'SELECT document from backups ORDER BY timestamp DESC LIMIT 1'\n    );\n  }\n\n  public recover() {\n    const events = [];\n    for (const event of this.preparedStmts.recover.iterate()) {\n      events.push(JSON.parse(event.document));\n    }\n    return events;\n  }\n  \n  public getAll(timestamp) {\n    let events = []\n\n    for (const event of this.preparedStmts.getAll.iterate(timestamp)) {\n      events.push(JSON.parse(event.document))\n    }\n    return events;\n  }\n  startFeed() {\n    this.conn.function('eventFeed', doc => {\n      eventEmitter.emit(JSON.parse(doc))\n    });\n    this.conn\n      .prepare(\n        'CREATE TRIGGER updateHook AFTER INSERT ON events BEGIN SELECT eventFeed(NEW.document); END'\n      )\n      .run();\n  }\n\n  public insertEvent(ev, callback = null) {\n    console.log('insertEvent ev is ', ev)\n    if (!this.conn) return callback('No db connection')\n    if (!ev.timestamp) {\n      ev.timestamp = Date.now()\n    }\n    var err = null\n    var result = null\n    result = this.preparedStmts.insertEvent.run(JSON.stringify(ev), ev.timestamp)\n    if (callback) {\n      callback(err, { event: ev, result })\n    }\n  }\n}\n\nconst aodb = new DB();\n\nexport default aodb;\n\n// gotta figure out why the functions weren't included with the object in the above export.\nexport function startDB(path: string) {\n  aodb.startDb(path);\n}\n\nexport function recover() {\n  return aodb.recover();\n}\n\nexport function getAll(timestamp) {\n  return aodb.getAll(timestamp);\n}\n","\nimport db from './db';\n\nclass Events {\n  sessionCreated(ownerId, session, token, callback) {\n    let newEvent = {\n      type: 'session-created',\n      session,\n      token,\n      ownerId\n    }\n    db.insertEvent(newEvent, callback);\n  }\n}\n\nexport default new Events();\n","\nimport { getNextId } from \"mobx/lib/internal\";\n\nconst express = require('express');\nconst Server = require('socket.io');\n\nconst React = require('react');\n\nconst { renderToString } = require('react-dom/server');\nconst { StaticRouter, } = require('react-router-dom');\nconst { Route, Switch } = require('react-router');\nconst Kefir = require('kefir');\n\nconst StyleContext = require('isomorphic-style-loader/StyleContext');\n\nconst authenticateSocket = require('socketio-auth');\nconst { default: authSocket } = require('./auth/socket');\n\nconst { changeFeed, shadowFeed } = require('./db');\n\nconst { default: buildHtml } = require('./template');\n\nconst { default: authApi } = require('./auth/api');\nconst { default: api } = require('./api');\nconst { default: App, KEY_AUTH_DATA } = require('../app');\nconst { startDB, recover, getAll } = require('./db');\nconst { default: store, createAoStore, serverState, pubState, applyBackup, removeSensitive } = require('../app/store');\nconst { applyEvent } = require('../app/mutations');\n\n\nstartDB('database.sqlite3');\n\nconst backup = recover();\n\nif (backup.length > 0) {\n  applyBackup(backup[0]);\n}\n\nconst events = getAll(backup[0]?.timestamp || 0);\nevents.forEach((event, i) => {\n  applyEvent(serverState, Object.assign({}, event));\n  applyEvent(pubState, removeSensitive(Object.assign({}, event)));\n  if (i > 0 && i % 10000 === 0) {\n    console.log('applied ', i, '/', events.length, ' events...')\n  }\n});\nconsole.log('applied ', events.length, ' events from the database');\n\ncreateAoStore(pubState);\nconst aoStore = store.store;\n\nfunction reactions(event) {\n  process.nextTick(err => {\n    switch (event.type) {\n      case 'task-boosted':\n      case 'task-boosted-lightning':\n        let optionList = [];\n        let defaultPrice;\n        let resourceId;\n        let resourceList = serverState.resources.map(r => r.resourceId);\n        let amount = parseFloat(event.amount);\n\n        serverState.tasks.some(t => {\n          if (\n            resourceList.indexOf(t.taskId) > -1 &&\n            t.priorities.indexOf(event.taskId) > -1\n          ) {\n            resourceId = t.taskId;\n            return true;\n          }\n        })\n        console.log('got resourceId', resourceId);\n        serverState.resources.some(r => {\n          if (r.resourceId === resourceId) {\n            defaultPrice = r.charge;\n            return true;\n          }\n        })\n        serverState.tasks.some(t => {\n          if (event.taskId === t.taskId) {\n            let str = t.name;\n            let cashTagLocation = str.search(/\\$/);\n            let customPrice = parseFloat(\n              str.slice(cashTagLocation + 1, cashTagLocation + 5)\n            );\n            if (customPrice > 0) {\n              console.log('using custom price, ', customPrice);\n              defaultPrice = customPrice;\n            }\n            if (defaultPrice > 0 && amount > 0) {\n              amount = amount / defaultPrice;\n            }\n            let hopper = t.name.slice(0, 1);\n            events.resourceUsed(resourceId, '', amount, 0, hopper, console.log);\n            return true;\n          }\n        })\n        break\n      case 'member-field-updated':\n        break;\n      case 'member-paid':\n        break;\n      case 'resource-stocked':\n        events.memberActivated(event.memberId);\n        break;\n      case 'resource-stocked':\n        break;\n      case 'member-address-updated':\n        break;\n      case 'member-created':\n        break;\n      case 'resource-created':\n        break;\n    }\n  })\n}\n\nchangeFeed\n  .onValue(ev => {\n    applyEvent(serverState, ev);\n  })\n  .onValue(reactions);\n\nconst filteredStream = changeFeed.map(removeSensitive);\nconst fullEvStream = Kefir.merge([filteredStream, shadowFeed]);\n\nlet loaded = false;\n\nmodule.exports = function routes(_options) {\n  const router = express.Router();\n  \n  router.use((req, _res, next) => {\n    if (!loaded) {  \n      loaded = true;\n\n      const server = req.socket.server;\n      const io = new Server(server);\n      authenticateSocket(io, { authenticate: authSocket, timeout: 2000 });\n\n      fullEvStream.onValue(ev => {\n        applyEvent(pubState, ev);\n        io.emit('eventstream', ev);\n        console.log('emitting:', ev);\n      });\n    }\n    if (aoStore) {\n      aoStore.state.session = null;\n      aoStore.state.token = null;\n      aoStore.state.user = null;\n      aoStore.state.loggedIn = false;\n    }\n  \n    next();\n  });\n\n  router.use((req, res, next) => {\n    if (aoStore && req.session.token && serverState.sessions.map(session => session.token).includes(req.session.token)) {\n      aoStore.state.session = req.session.session;\n      aoStore.state.token = req.session.token;\n      aoStore.state.user = req.session.name;\n      aoStore.state.loggedIn = true;\n    }\n    const css = new Set();\n    const insertCss = (...styles) => styles.forEach(style => css.add(style._getCss()));\n\n    const context = {};\n    const components = renderToString(\n      <StyleContext.Provider value={{ insertCss }}>\n        <StaticRouter location={req.url} context={context}>\n          <Switch>\n            <App />\n          </Switch>\n        </StaticRouter>\n      </StyleContext.Provider>\n    );\n    if (context.url) {\n      res.redirect(301, context.url);\n    } else if (components === '') {\n      next();\n    } else {\n      res.status(200).send(buildHtml(req, components, /*[...css].join('')*/'', aoStore.state));\n    }\n  });\n\n  // Backend\n  router.use(authApi);\n  router.use(api);\n\n  return router;\n}\n","\nimport fs from 'fs';\nimport { join } from 'path';\n//\nconst isDev = process.env.NODE_ENV === 'development';\n\nconst SITE_TITLE = '%SITE_TITLE%';\nconst SITE_URL = '%SITE_URL%';\nconst SITE_COVER_IMG_URL = '%SITE_COVER_IMG_URL%';\nconst SITE_DESCRIPTION = '%SITE_DESCRIPTION%';\nconst SITE_CSS = '/*SITE_CSS*/';\nconst APP_HTML = 'APP_HTML';\nconst SITE_PRELOADED_STATE = 'SITE_PRELOADED_STATE';\nconst SITE_SCRIPTS = '<!-- SITE_SCRIPTS -->';\nconst DEV_SCRIPTS =\n  \"<script type='text/javascript' src='/js/vendor.js'></script><script type='text/javascript' src='/js/app.js'></script>\";\n\nexport interface RenderOption {\n  html: string;\n  css: string;\n  preloadedState: any;\n  siteUrl: string;\n  title: string;\n  coverImg: string;\n  description: string;\n}\n\nexport const loadTemplateBlocking = () => {\n  try {\n    const htmlPath = isDev\n      ? join(__dirname, '../public/template.html')\n      : join(__dirname, './dist/template.html');\n    if (!fs.existsSync(htmlPath)) {\n      console.log(`${htmlPath} does not exists, loadTemplate failed`);\n      return process.exit();\n    }\n    const html = fs.readFileSync(htmlPath, 'utf8');\n    if (!html) {\n      console.log(`${htmlPath} does not exists, file empty`);\n      return process.exit();\n    }\n    return isDev ? html.replace(SITE_SCRIPTS, DEV_SCRIPTS) : html;\n  } catch (e) {\n    console.error(e);\n    process.exit();\n  }\n};\n\nfunction replace(str: string, mapObj: any) {\n  const re = new RegExp(\n    Object.keys(mapObj)\n      .map((key) => escapeRegExp(key))\n      .join('|'),\n    'gi',\n  );\n  return str.replace(re, function (matched) {\n    return mapObj[matched];\n  });\n}\n\nfunction escapeRegExp(str: string) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\nexport function render({\n  html,\n  css,\n  preloadedState,\n  siteUrl,\n  title,\n  coverImg,\n  description,\n}: RenderOption): string {\n  const htmlTemplate = global.htmlTemplate;\n  return replace(htmlTemplate, {\n    [SITE_TITLE]: title,\n    [SITE_URL]: siteUrl,\n    [SITE_COVER_IMG_URL]: coverImg,\n    [SITE_DESCRIPTION]: description,\n    [SITE_PRELOADED_STATE]: JSON.stringify(preloadedState).replace(/</g, '\\\\u003c'),\n    [APP_HTML]: html,\n    [SITE_CSS]: css,\n  });\n}\n\nfunction getProtocol(req: PublicRequest): string {\n  // @ts-ignore\n  let proto: string = req.connection.encrypted ? 'https' : 'http';\n  // only do this if you trust the proxy\n  const forwarded = req.headers['x-forwarded-proto'];\n  if (forwarded) proto = forwarded.toString();\n  return proto.split(/\\s*,\\s*/)[0];\n}\n\nexport default function buildHtml(req, components, css, state={}) {\n  const baseUrl = `${getProtocol(req)}://${req.get('host')}`;\n  \n  return render({\n    html: components,\n    css: css,\n    preloadedState: state,\n    siteUrl: baseUrl + req.originalUrl,\n    title: 'untitled',\n    coverImg: '',\n    description: ''\n  });  \n}\n","module.exports = require(\"@babel/runtime/helpers/applyDecoratedDescriptor\");","module.exports = require(\"@babel/runtime/helpers/asyncToGenerator\");","module.exports = require(\"@babel/runtime/helpers/classCallCheck\");","module.exports = require(\"@babel/runtime/helpers/createClass\");","module.exports = require(\"@babel/runtime/helpers/defineProperty\");","module.exports = require(\"@babel/runtime/helpers/extends\");","module.exports = require(\"@babel/runtime/helpers/getPrototypeOf\");","module.exports = require(\"@babel/runtime/helpers/inherits\");","module.exports = require(\"@babel/runtime/helpers/objectWithoutProperties\");","module.exports = require(\"@babel/runtime/helpers/possibleConstructorReturn\");","module.exports = require(\"@babel/runtime/helpers/slicedToArray\");","module.exports = require(\"@babel/runtime/helpers/toConsumableArray\");","module.exports = require(\"@babel/runtime/regenerator\");","module.exports = require(\"better-sqlite3\");","module.exports = require(\"crypto\");","module.exports = require(\"express\");","module.exports = require(\"fs\");","module.exports = require(\"isomorphic-style-loader/StyleContext\");","module.exports = require(\"kefir\");","module.exports = require(\"lodash\");","module.exports = require(\"mobx\");","module.exports = require(\"mobx-react\");","module.exports = require(\"path\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-helmet\");","module.exports = require(\"react-hot-loader/root\");","module.exports = require(\"react-router\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"socket.io\");","module.exports = require(\"socket.io-client\");","module.exports = require(\"socketio-auth\");","module.exports = require(\"superagent\");","module.exports = require(\"uuid\");"],"sourceRoot":""}